<div class="row d-flex justify-content-center">
  <section id="dadosPessoais">
    <h3 class="h3Style">Dados Pessoais</h3>
    <div class="col-xs-12 col-sm-11 col-lg-9 col-xl-8">
      <form id="dadosPessoais" [formGroup]="personalInfoForm">
        <div class="my-4">
          <div class="form-group formWidth">
            <label for="nomeUsuario" class="form-label">Nome</label>
            <input
              formControlName="nomeUsuario"
              type="text"
              class="form-control inputStyle"
              id="nomeUsuario"
              name="nomeUsuario"
              placeholder="Nome"
            />
            <div
              class="requiredInfo"
              *ngIf="
                personalInfoForm.get('nomeUsuario')?.errors &&
                personalInfoForm.get('nomeUsuario')?.touched
              "
            >
              Preenchimento do nome é obrigatório
            </div>
          </div>
        </div>

        <div class="my-4">
          <div class="form-group formWidth">
            <label for="sobrenomeUsuario" class="form-label">Sobrenome</label>
            <input
              formControlName="sobrenomeUsuario"
              type="text"
              class="form-control inputStyle"
              id="sobrenomeUsuario"
              name="sobrenomeUsuario"
              placeholder="Sobrenome"
            />
            <div
              class="requiredInfo"
              *ngIf="
                personalInfoForm.get('sobrenomeUsuario')?.errors &&
                personalInfoForm.get('sobrenomeUsuario')?.touched
              "
            >
              Preenchimento do sobrenome é obrigatório
            </div>
          </div>
        </div>

        <div class="my-4">
          <div class="form-group formWidth">
            <label for="emailUsuario" class="form-label">E-mail</label>
            <input
              formControlName="emailUsuario"
              type="email"
              class="form-control inputStyle"
              id="emailUsuario"
              name="emailUsuario"
            />
          </div>
        </div>

        <div class="my-4">
          <div class="form-group">
            <label for="cpfUsuario" class="form-label">CPF</label>
            <input
              formControlName="cpfUsuario"
              type="text"
              class="form-control inputStyle smallInput-12"
              id="cpfUsuario"
              name="cpfUsuario"
              placeholder="CPF"
            />
          </div>
        </div>

        <div class="my-4">
          <div class="form-group">
            <label for="dataDeNascimento" class="form-label"
              >Data de Nascimento</label
            >
            <input
              formControlName="dataDeNascimento"
              type="date"
              class="form-control inputStyle smallInput-12"
              id="dataDeNascimento"
              name="dataDeNascimento"
            />
          </div>
        </div>

        <div class="my-4">
          <div class="form-group">
            <label for="telefoneUsuario" class="form-label">Telefone</label>
            <input
              formControlName="telefoneUsuario"
              type="text"
              class="form-control inputStyle smallInput-12"
              id="telefoneUsuario"
              name="telefoneUsuario"
              placeholder="Telefone"
            />
          </div>
        </div>

        <div class="my-4">
          <div class="form-check d-flex align-items-center ps-0">
            <input
              formControlName="compartilharDados"
              type="checkbox"
              name="compartilharDados"
              id="compartilharDados"
              class="form-check-input m-0"
            />
            <label
              for="compartilharDados"
              class="form-check-label text-break ps-2"
              >Gostaria de receber a newsletter <strong>daFazenda</strong> por
              email.</label
            >
          </div>
        </div>

        <div class="row d-flex justify-content-between align-items-center pt-2">
          <div class="col-xs-12 col-sm-7 mb-4 mb-sm-0">
            <button
              class="btn buttonStyle"
              type="submit"
              form="dadosPessoais"
              (click)="updateOnSubmit()"
              [disabled]="loading || personalInfoForm.invalid"
            >
              <span
                *ngIf="loading"
                class="spinner-border spinner-border-sm me-1"
                role="status"
                aria-hidden="true"
              ></span>
              Atualizar cadastro
            </button>
          </div>
          <div class="col-xs-12 col-sm-5 mb-2 mb-sm-0">
            <button class="btn pStyleDark" type="reset" (click)="refresh()">
              Cancelar
            </button>
          </div>
        </div>
      </form>
    </div>
  </section>
  <hr />
  <section id="senha">
    <h3 class="h3Style">Alterar Senha</h3>
    <div class="col-xs-12 col-sm-11 col-lg-9 col-xl-8">
      <form #passwordForm id="senha">
        <div class="my-4">
          <div class="form-group formWidth">
            <label for="senhaUsuario" class="form-label">Senha atual</label>
            <input
              [(ngModel)]="usuario.confirmacaoSenha"
              type="password"
              class="form-control inputStyle"
              id="senhaUsuario"
              name="senhaUsuario"
              placeholder="Senha Atual"
              required
            />
          </div>
        </div>
        <div class="my-4">
          <div class="form-group formWidth">
            <label for="novaSenha" class="form-label">Nova senha</label>
            <input
              [(ngModel)]="usuario.senhaUsuario"
              type="password"
              class="form-control inputStyle"
              id="novaSenha"
              name="novaSenha"
              placeholder="Nova Senha"
              required
            />
          </div>
        </div>
        <div class="my-4">
          <div class="form-group formWidth">
            <label for="confirmarSenha" class="form-label"
              >Confirmar nova senha</label
            >
            <input
              (input)="confirmarSenha($event)"
              type="password"
              class="form-control inputStyle"
              id="confirmarSenha"
              name="confirmarSenha"
              placeholder="Confirmar Nova Senha"
              required
            />
          </div>
        </div>

        <div class="row d-flex justify-content-between align-items-center pt-2">
          <div class="col-xs-12 col-sm-7 mb-4 mb-sm-0">
            <button
              class="btn buttonStyle"
              type="submit"
              form="senha"
              (click)="updateOnSubmit()"
              [disabled]="loading"
            >
              <span
                *ngIf="loading"
                class="spinner-border spinner-border-sm me-1"
                role="status"
                aria-hidden="true"
              ></span>
              Atualizar Senha
            </button>
          </div>
          <div class="col-xs-12 col-sm-5 mb-2 mb-sm-0">
            <button class="btn pStyleDark" type="reset" (click)="clearForm()">
              Cancelar
            </button>
          </div>
        </div>
      </form>
    </div>
  </section>

  <hr />

  <section id="endereco">
    <h3 class="h3Style">Endereço</h3>
    <div class="col-xs-12 col-sm-8 col-lg-7 col-xl-6">
      <form id="endereco" [formGroup]="addressForm">
        <div class="row my-4">
          <div class="form-group">
            <label for="cepEndereco" class="form-label">CEP</label>
            <input
              formControlName="cepEndereco"
              class="form-control inputStyle smallInput-10"
              type="text"
              name="cepEndereco"
              id="cepEndereco"
              placeholder="CEP"
            />
            <div
              class="requiredInfo"
              *ngIf="
                addressForm.get('cepEndereco')?.errors &&
                addressForm.get('cepEndereco')?.touched
              "
            >
              Preenchimento do CEP é obrigatório
            </div>
          </div>
        </div>

        <div class="row my-4">
          <div class="form-group pe-lg-0">
            <label for="logradouroEndereco" class="form-label"
              >Logradouro</label
            >
            <input
              formControlName="logradouroEndereco"
              class="form-control inputStyle"
              type="text"
              name="logradouroEndereco"
              id="logradouroEndereco"
              placeholder="Endereço"
            />
            <div
              class="requiredInfo"
              *ngIf="
                addressForm.get('logradouroEndereco')?.errors &&
                addressForm.get('logradouroEndereco')?.touched
              "
            >
              Preenchimento do logradouro é obrigatório
            </div>
          </div>
        </div>

        <div class="row d-flex justify-content-between my-4">
          <div
            class="col-xs-12 col-sm-12 col-md-3 col-lg-3 mb-4 mb-sm-4 mb-md-0"
          >
            <div class="form-group">
              <label for="numeroEndereco" class="form-label">Número</label>
              <input
                formControlName="numeroEndereco"
                class="form-control inputStyle numInput"
                type="number"
                name="numeroEndereco"
                id="numeroEndereco"
                placeholder="Número"
              />
              <div
                class="requiredInfo"
                *ngIf="
                  addressForm.get('numeroEndereco')?.errors &&
                  addressForm.get('numeroEndereco')?.touched
                "
              >
                Preenchimento do número é obrigatório
              </div>
            </div>
          </div>

          <div class="col-xs-12 col-sm-12 col-md-8 col-lg-9 pe-lg-0">
            <div class="form-group">
              <label for="complementoEndereco" class="form-label"
                >Complemento</label
              >
              <input
                formControlName="complementoEndereco"
                class="form-control inputStyle"
                type="text"
                name="complementoEndereco"
                id="complementoEndereco"
                placeholder="Complemento"
              />
            </div>
          </div>
        </div>

        <div class="row my-4">
          <div class="form-group pe-lg-0">
            <label for="bairroEndereco" class="form-label">Bairro</label>
            <input
              formControlName="bairroEndereco"
              class="form-control inputStyle"
              type="text"
              name="bairroEndereco"
              id="bairroEndereco"
              placeholder="Bairro"
            />
            <div
              class="requiredInfo"
              *ngIf="
                addressForm.get('bairroEndereco')?.errors &&
                addressForm.get('bairroEndereco')?.touched
              "
            >
              Preenchimento do bairro é obrigatório
            </div>
          </div>
        </div>

        <div class="row d-flex justify-content-between my-4">
          <div class="col-xs-12 col-sm-12 col-md-12 col-lg-8 pe-0">
            <div class="form-group mb-4 me-3">
              <label for="cidadeEndereco" class="form-label">Cidade</label>
              <input
                formControlName="cidadeEndereco"
                class="form-control inputStyle"
                type="text"
                name="cidadeEndereco"
                id="cidadeEndereco"
                placeholder="Cidade"
              />
              <div
                class="requiredInfo"
                *ngIf="
                  addressForm.get('cidadeEndereco')?.errors &&
                  addressForm.get('cidadeEndereco')?.touched
                "
              >
                Preenchimento da cidade é obrigatório
              </div>
            </div>
          </div>

          <div class="col-xs-12 col-sm-12 col-md-3 col-lg-3">
            <div class="form-group">
              <label for="estadoEndereco" class="form-label">Estado</label>
              <select
                formControlName="estadoEndereco"
                name="estadoEndereco"
                id="estadoEndereco"
                class="form-control inputStyle smallInput-6"
              >
                <option value="" active disabled></option>
                <option
                  *ngFor="let estado of estados | keyvalue"
                  [value]="estado.value"
                  [attr.selected]="
                    usuario.estadoEndereco == estado.value ? true : null
                  "
                >
                  {{ estado.value }}
                </option>
              </select>
            </div>
          </div>
        </div>

        <div class="row d-flex justify-content-between align-items-center pt-2">
          <div class="col-xs-12 col-sm-8 mb-4 mb-sm-0">
            <button
              class="btn buttonStyle"
              type="submit"
              form="endereco"
              (click)="updateOnSubmit()"
              [disabled]="loading || addressForm.invalid"
            >
              <span
                *ngIf="loading"
                class="spinner-border spinner-border-sm me-1"
                role="status"
                aria-hidden="true"
              ></span>
              Atualizar Endereço
            </button>
          </div>
          <div class="col-xs-12 col-sm-3 mb-2 mb-sm-0">
            <button class="btn pStyleDark" type="reset" (click)="refresh()">
              Cancelar
            </button>
          </div>
        </div>
      </form>
    </div>
  </section>

  <hr />

  <section id="apagar">
    <h3 class="h3Style">Apagar minha conta</h3>
    <button
      type="button"
      class="btn buttonStyle deleteButton mt-4"
      data-bs-toggle="modal"
      data-bs-target="#excluirConta"
    >
      Apagar
    </button>

    <div
      class="modal fade"
      id="excluirConta"
      tabindex="-1"
      aria-labelledby="excluirContaLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title pStyleDark" id="excluirContaLabel">
              Você tem certeza de que deseja fazer isto?
            </h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <div class="modal-body">
            <div
              class="d-flex justify-content-start align-items-center text-danger"
            >
              Sua conta será apagada e o processo é irreversível!
            </div>
          </div>
          <div class="modal-footer justify-content-around">
            <button class="btn pStyleDark mb-4 mb-sm-2" data-bs-dismiss="modal">
              Manter minha conta
            </button>
            <button
              type="button"
              class="btn buttonStyle deleteButton p-2 mb-2 mb-sm-2"
              data-bs-dismiss="modal"
              (click)="delete()"
            >
              Apagar
            </button>
          </div>
        </div>
      </div>
    </div>
  </section>
</div>
